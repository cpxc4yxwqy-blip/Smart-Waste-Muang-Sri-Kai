const r={},a=(r==null?void 0:r.VITE_BACKEND_URL)||"http://localhost:3001";async function c(o,e,s="viewer"){try{const n=await(await fetch(`${a}/api/push/subscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:o,userId:e,role:s})})).json();return console.log("[Backend] Subscription saved",n),n.success}catch(t){return console.error("[Backend] Failed to save subscription",t),!1}}async function i(o){try{const s=await(await fetch(`${a}/api/push/unsubscribe`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:o})})).json();return console.log("[Backend] Subscription removed",s),s.success}catch(e){return console.error("[Backend] Failed to remove subscription",e),!1}}async function d(o,e,s){try{const n=await(await fetch(`${a}/api/push/send`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({title:o,body:e,targetRoles:s})})).json();return console.log("[Backend] Push sent",n),{sent:n.sent||0,failed:n.failed||0}}catch(t){return console.error("[Backend] Failed to send push",t),{sent:0,failed:0}}}export{i as removeSubscriptionFromBackend,d as sendPushNotification,c as sendSubscriptionToBackend};
