const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MonthlyTrendChart-Oz2Ny3Cu.js","assets/vendor-mMFj62bC.js","assets/recharts-Crih3Ma1.js","assets/react-Bzgz95E1.js","assets/CompositionPieChart-DRtRAeSw.js","assets/WasteBarChart-BDLHzmna.js","assets/types-BFuqyHc6.js","assets/PerCapitaChart-CFpElCZw.js","assets/ComparisonLineChart-DXFIGME8.js","assets/CompositionRadarChart-cMtITIiA.js"])))=>i.map(i=>d[i]);
import{_ as w}from"./index-l3CABg5K.js";import{j as e,C as se,T as Y,g as ae,h as le,i as W,k as H,l as G,m as re,n as oe,G as ne,o as ie,e as de,p as ce,A as xe,q as me,r as ge,s as he,t as B,u as U}from"./vendor-mMFj62bC.js";import{r as l,R as x}from"./recharts-Crih3Ma1.js";import{T as P,a as pe}from"./types-BFuqyHc6.js";import{g as ue,a as be}from"./geminiService-CfJKnA1m.js";import"./react-Bzgz95E1.js";const fe=x.lazy(()=>w(()=>import("./MonthlyTrendChart-Oz2Ny3Cu.js"),__vite__mapDeps([0,1,2,3]))),je=x.lazy(()=>w(()=>import("./CompositionPieChart-DRtRAeSw.js"),__vite__mapDeps([4,1,2,3]))),ve=x.lazy(()=>w(()=>import("./WasteBarChart-BDLHzmna.js"),__vite__mapDeps([5,1,2,3,6]))),Ne=x.lazy(()=>w(()=>import("./PerCapitaChart-CFpElCZw.js"),__vite__mapDeps([7,1,2,3,6]))),we=x.lazy(()=>w(()=>import("./ComparisonLineChart-DXFIGME8.js"),__vite__mapDeps([8,1,2,3,6]))),ye=x.lazy(()=>w(()=>import("./CompositionRadarChart-cMtITIiA.js"),__vite__mapDeps([9,1,2,3]))),Fe=({records:p,onNavigate:k})=>{const v=new Date().getFullYear()+543,[d,R]=l.useState(v),[u,S]=l.useState(v-1),[m,F]=l.useState(!1),[j,N]=l.useState(""),[y,q]=l.useState(()=>{const t=localStorage.getItem("waste_cost_per_ton");return t?parseFloat(t):500}),[g,X]=l.useState(()=>{const t=localStorage.getItem("waste_yearly_target");return t?parseFloat(t):500}),[E,M]=l.useState(""),[A,K]=l.useState(!1),[$,J]=l.useState(new Date),[Q,Z]=l.useState(0);l.useEffect(()=>{localStorage.setItem("waste_cost_per_ton",y.toString())},[y]),l.useEffect(()=>{localStorage.setItem("waste_yearly_target",g.toString())},[g]);const O=l.useMemo(()=>{const t=Array.from(new Set(p.map(s=>s.year)));return t.includes(v)||t.push(v),t.sort((s,a)=>a-s)},[p,v]),r=l.useMemo(()=>p.filter(t=>t.year===d).sort((t,s)=>t.month-s.month),[p,d]),V=l.useMemo(()=>{let t=p.filter(s=>s.year===d);if(j){const s=j.toLowerCase();t=t.filter(a=>P[a.month-1].includes(s)||a.recorderName&&a.recorderName.toLowerCase().includes(s)||a.note&&a.note.toLowerCase().includes(s))}return t.sort((s,a)=>a.timestamp-s.timestamp)},[p,d,j]),c=l.useMemo(()=>p.filter(t=>t.year===u).sort((t,s)=>t.month-s.month),[p,u]),n=l.useMemo(()=>{if(r.length===0)return{totalTon:"0.00",latestRate:"0.00",totalCost:"0",latestPop:"0",variancePercent:0,popVariancePercent:0,hasComparison:!1,avgKgPerDay:0,totalRaw:0};const t=r.reduce((_,D)=>_+D.amountKg,0),s=r[r.length-1],a=s.population>0?s.amountKg/s.population/30:0,i=t/1e3*y;let h=0,o=0,f=!1;if(c.length>0){const _=c.reduce((T,z)=>T+z.amountKg,0),D=r.length>0?r.reduce((T,z)=>T+z.population,0)/r.length:0,I=c.length>0?c.reduce((T,z)=>T+z.population,0)/c.length:0;_>0&&(h=(t-_)/_*100,f=!0),I>0&&(o=(D-I)/I*100)}return{totalRaw:t/1e3,totalTon:(t/1e3).toFixed(2),latestPop:s.population.toLocaleString(),avgKgPerDay:t/(r.length*30),latestRate:a.toFixed(3),totalCost:i.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),variancePercent:h,popVariancePercent:o,hasComparison:f}},[r,c,y]),C=l.useMemo(()=>{if(g<=0)return 0;const t=n.totalRaw/g*100;return Math.min(t,100)},[n.totalRaw,g]),b=l.useMemo(()=>{let t=0,s=0,a=0,i=0;return r.forEach(o=>{o.composition&&(t+=o.composition.general,s+=o.composition.organic,a+=o.composition.recycle,i+=o.composition.hazardous)}),t+s+a+i===0?[]:[{name:"ทั่วไป",value:t,color:"#60a5fa"},{name:"อินทรีย์",value:s,color:"#34d399"},{name:"รีไซเคิล",value:a,color:"#fbbf24"},{name:"อันตราย",value:i,color:"#f87171"}].filter(o=>o.value>0)},[r]),ee=l.useMemo(()=>P.map((t,s)=>{const a=r.find(f=>f.month===s+1),i=c.find(f=>f.month===s+1),h=a&&a.population>0?a.amountKg/a.population/30:0,o=(a==null?void 0:a.composition)||{general:0,organic:0,recycle:0,hazardous:0};return{name:pe[s],fullName:t,amountTon:a?parseFloat((a.amountKg/1e3).toFixed(2)):0,compareAmountTon:i?parseFloat((i.amountKg/1e3).toFixed(2)):0,rate:parseFloat(h.toFixed(3)),genTon:parseFloat((o.general/1e3).toFixed(2)),orgTon:parseFloat((o.organic/1e3).toFixed(2)),recTon:parseFloat((o.recycle/1e3).toFixed(2)),hazTon:parseFloat((o.hazardous/1e3).toFixed(2)),targetLine:(g/12).toFixed(2)}}),[r,c,g]);l.useEffect(()=>{const t=setInterval(()=>{const s=new Date;if(J(s),n.avgKgPerDay){const a=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),i=(s.getTime()-a)/1e3;Z(n.avgKgPerDay/86400*i)}},1e3);return()=>clearInterval(t)},[n.avgKgPerDay]);const te=async()=>{K(!0);const t=m&&r.length>0&&c.length>0?await ue(d,r,u,c):await be(r);M(t),K(!1)};return e.jsxs("div",{className:"space-y-8 pb-20 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 relative rounded-3xl overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 shadow-2xl shadow-slate-300/50 p-[1px]",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"}),e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-500/30 rounded-full blur-[120px] -mr-32 -mt-32 animate-pulse-slow pointer-events-none"}),e.jsxs("div",{className:"relative z-10 bg-slate-900/50 backdrop-blur-sm rounded-[23px] p-8 md:p-10 flex flex-col md:flex-row justify-between items-center gap-6 h-full",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner ring-1 ring-white/5",children:e.jsx(se,{size:32,className:"text-emerald-300"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl xl:text-5xl font-bold text-white tracking-tighter tabular-nums leading-none",children:$.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}),e.jsx("p",{className:"text-slate-400 font-medium mt-2 text-lg",children:$.toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs font-medium text-slate-500 bg-slate-800/50 px-3 py-1 rounded-full w-fit border border-white/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Last updated: ",new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"glass-panel bg-white/5 border-white/10 p-6 rounded-2xl w-full md:w-auto min-w-[220px] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/20 blur-2xl rounded-full -mr-5 -mt-5 group-hover:bg-emerald-400/30 transition-colors"}),e.jsx("p",{className:"text-slate-400 text-[10px] uppercase tracking-widest font-bold mb-3",children:"Est. Waste Today"}),e.jsxs("div",{className:"flex items-end justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl xl:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 to-emerald-400 tabular-nums tracking-tight",children:Q.toFixed(2)}),e.jsx("span",{className:"text-sm font-bold text-emerald-600/70",children:"kg"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse shadow-[0_0_10px_rgba(52,211,153,0.8)]"}),e.jsx("span",{className:"text-[10px] text-emerald-500/70 font-medium",children:"Live"})]})]})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-3xl p-6 border border-white/60 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold text-lg",children:[e.jsx(Y,{className:"text-rose-500",size:20}),e.jsx("h3",{children:"Yearly Target"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Goal vs Actual (Ton)"})]}),e.jsxs("div",{className:"bg-rose-50 p-2 rounded-xl text-rose-500 cursor-pointer hover:bg-rose-100 transition-colors group relative",children:[e.jsx(Y,{size:20}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white p-3 rounded-xl shadow-xl border border-slate-100 opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all z-50",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block mb-1",children:"Set Limit (Ton/Year)"}),e.jsx("input",{type:"number",value:g,onChange:t=>X(Number(t.target.value)),className:"w-full border border-slate-200 rounded-lg p-1.5 text-sm font-bold text-slate-700"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-800",children:n.totalTon}),e.jsxs("span",{className:"text-sm font-bold text-slate-400",children:["/ ",g," Ton"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${C>100?"bg-red-500":C>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${C}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs font-bold",children:[e.jsxs("span",{className:`${C>100?"text-red-500":"text-emerald-600"}`,children:[C.toFixed(1),"% Used"]}),e.jsx("span",{className:"text-slate-400",children:g-n.totalRaw>0?`${(g-n.totalRaw).toFixed(2)} Ton left`:"Over Limit!"})]})]})]})]}),e.jsxs("div",{className:"glass-panel p-2 rounded-2xl shadow-glass flex flex-col xl:flex-row justify-between gap-3 sticky top-4 z-30 transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-1",children:[e.jsxs("div",{className:"relative group w-full md:w-64",children:[e.jsx(ae,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-emerald-500 transition-colors"}),e.jsx("input",{type:"text",value:j,onChange:t=>N(t.target.value),placeholder:"ค้นหาข้อมูล...",className:"w-full pl-10 pr-4 py-2.5 bg-white/50 hover:bg-white border border-transparent hover:border-slate-200 focus:bg-white focus:border-emerald-200 rounded-xl text-sm font-medium outline-none transition-all placeholder:text-slate-400"})]}),e.jsx("div",{className:"h-8 w-[1px] bg-slate-200 mx-1 hidden md:block"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-1 p-1 rounded-xl border border-slate-100",children:[e.jsx("select",{value:d,onChange:t=>R(parseInt(t.target.value)),className:"bg-transparent py-1.5 pl-3 pr-8 font-bold text-slate-700 outline-none cursor-pointer text-sm hover:text-emerald-600 transition-colors appearance-none",children:O.map(t=>e.jsxs("option",{value:t,children:["ปี ",t]},t))}),e.jsx(le,{size:14,className:"absolute right-3 pointer-events-none text-slate-400"})]}),e.jsxs("button",{onClick:()=>F(!m),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${m?"bg-indigo-50 text-indigo-600 shadow-inner":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx(W,{size:14})," ",m?"เปรียบเทียบ On":"เปรียบเทียบ"]}),m&&e.jsx("select",{value:u,onChange:t=>S(parseInt(t.target.value)),className:"bg-indigo-50 py-2 px-3 rounded-xl font-bold text-indigo-600 outline-none text-sm border border-indigo-100 cursor-pointer animate-fade-in",children:O.filter(t=>t!==d).map(t=>e.jsxs("option",{value:t,children:["เทียบกับ ",t]},t))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1",children:[e.jsxs("button",{onClick:te,className:"flex items-center gap-2 px-4 py-2.5 bg-white text-indigo-600 rounded-xl hover:shadow-md transition-all text-sm font-bold border border-indigo-100 group",children:[e.jsx(H,{size:16,className:"group-hover:scale-110 transition-transform text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent",children:"Gemini Insight"})]}),e.jsxs("button",{onClick:()=>k("entry"),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl shadow-lg shadow-emerald-500/30 transition-all text-sm font-bold hover:-translate-y-0.5 hover:shadow-emerald-500/40 active:scale-95",children:[e.jsx(G,{size:18})," บันทึกข้อมูล"]})]})]}),(E||A)&&e.jsx("div",{className:"relative overflow-hidden rounded-2xl p-[1px] bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-fade-in shadow-lg",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-[15px] p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-100 rounded-full blur-3xl opacity-60 -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"flex gap-5 relative z-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-100 to-white p-3 rounded-2xl text-indigo-600 shrink-0 shadow-sm h-fit border border-indigo-50",children:e.jsx(H,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-indigo-900 mb-2 flex items-center gap-2 text-lg",children:["AI Analysis ",e.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded-full uppercase tracking-widest font-bold",children:"Gemini 2.5 Flash"})]}),A?e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm py-2",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce"})," กำลังวิเคราะห์ข้อมูลรูปแบบ..."]}):e.jsx("p",{className:"text-slate-600 text-sm leading-7 font-medium",children:E})]}),e.jsx("button",{onClick:()=>M(""),className:"text-slate-300 hover:text-slate-500 transition-colors h-fit p-1 hover:bg-slate-100 rounded-lg",children:"×"})]})]})}),r.length===0&&!j?e.jsxs("div",{className:"glass-panel rounded-3xl p-20 text-center border-dashed border-2 border-slate-300/50 flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6 shadow-inner",children:e.jsx(re,{className:"text-slate-300",size:48})}),e.jsxs("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:["ไม่มีข้อมูลสำหรับปี ",d]}),e.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:"เริ่มบันทึกข้อมูลการจัดการขยะเพื่อปลดล็อกข้อมูลเชิงลึกและการวิเคราะห์ที่มีประสิทธิภาพ"}),e.jsxs("button",{onClick:()=>k("entry"),className:"inline-flex items-center gap-2 px-8 py-4 bg-emerald-600 text-white rounded-2xl hover:bg-emerald-700 font-bold shadow-xl shadow-emerald-500/20 hover:shadow-emerald-500/40 transition-all hover:-translate-y-1",children:[e.jsx(G,{size:20})," บันทึกข้อมูลแรก"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(L,{title:"ปริมาณขยะรวม",value:n.totalTon,unit:"ตัน",icon:e.jsx(oe,{size:24}),color:"emerald",subValue:m&&n.hasComparison?`${Math.abs(n.variancePercent).toFixed(1)}%`:void 0,trend:n.variancePercent>0?"up":"down"}),e.jsx(L,{title:"อัตราการเกิดขยะ",value:n.latestRate,unit:"กก./คน/วัน",icon:e.jsx(ne,{size:24}),color:"blue",badge:"ประสิทธิภาพ"}),e.jsx(L,{title:"งบประมาณ (ประมาณการ)",value:`฿${n.totalCost}`,unit:"",icon:e.jsx(ie,{size:24}),color:"amber",customAction:e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-lg px-3 py-1 mt-3 border border-amber-100/50",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"ต้นทุน/ตัน:"}),e.jsx("input",{type:"number",value:y,onChange:t=>q(parseFloat(t.target.value)||0),className:"w-16 bg-transparent text-right text-xs font-bold text-amber-700 outline-none border-b border-amber-300/50 focus:border-amber-500"})]})}),e.jsx(L,{title:"จำนวนประชากร",value:n.latestPop,unit:"คน",icon:e.jsx(de,{size:24}),color:"indigo",subValue:m&&n.hasComparison?`${Math.abs(n.popVariancePercent).toFixed(1)}%`:void 0,trend:n.popVariancePercent>0?"up":"down"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"glass-panel rounded-3xl p-6 lg:col-span-2",children:"Loading chart..."}),children:e.jsx(fe,{chartData:ee,compositionData:b,isCompareMode:m,selectedYear:d,compareYear:u})}),e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"glass-panel rounded-3xl p-6",children:"Loading composition..."}),children:e.jsx(je,{compositionData:b})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:[e.jsxs("div",{className:"glass-panel rounded-3xl p-6 shadow-glass border border-white/60",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ce,{size:20,className:"text-emerald-500"}),"กราฟแท่ง - ปริมาณรายเดือน"]})}),e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:"Loading..."}),children:e.jsx(ve,{data:r})})]}),e.jsxs("div",{className:"glass-panel rounded-3xl p-6 shadow-glass border border-white/60",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(xe,{size:20,className:"text-blue-500"}),"ขยะต่อหัวประชากร"]}),e.jsx("span",{className:"text-xs text-slate-500 bg-white/60 px-3 py-1 rounded-full",children:"kg/คน/วัน"})]}),e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"h-[250px] flex items-center justify-center text-slate-400",children:"Loading..."}),children:e.jsx(Ne,{data:r})})]})]}),m&&c.length>0&&e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mt-6",children:e.jsxs("div",{className:"glass-panel rounded-3xl p-6 shadow-glass border border-white/60 lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(W,{size:20,className:"text-indigo-500"}),"เปรียบเทียบ ",d," vs ",u]}),e.jsx("span",{className:"text-xs text-indigo-600 bg-indigo-50 px-3 py-1 rounded-full font-bold",children:"รายเดือน"})]}),e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:"Loading..."}),children:e.jsx(we,{currentData:r,compareData:c,currentYear:d,compareYear:u})})]})}),b.general+b.organic+b.recycle+b.hazardous>0&&e.jsxs("div",{className:"glass-panel rounded-3xl p-6 shadow-glass border border-white/60 mt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(me,{size:20,className:"text-purple-500"}),"สัดส่วนประเภทขยะ (Radar)"]}),e.jsxs("span",{className:"text-xs text-slate-500 bg-white/60 px-3 py-1 rounded-full",children:["ปี ",d]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsx(x.Suspense,{fallback:e.jsx("div",{className:"h-[300px] flex items-center justify-center text-slate-400",children:"Loading..."}),children:e.jsx(ye,{general:b.general,organic:b.organic,recycle:b.recycle,hazardous:b.hazardous})})})})]}),e.jsxs("div",{className:"glass-panel rounded-3xl overflow-hidden mt-8 shadow-glass border border-white/60",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-white/40 backdrop-blur-sm",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(ge,{size:20,className:"text-slate-400"})," บันทึกข้อมูลละเอียด"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase tracking-widest font-bold border-b border-slate-100/50",children:[e.jsx("th",{className:"p-5 pl-8",children:"เดือน/ปี"}),e.jsx("th",{className:"p-5 text-right",children:"ปริมาณ (ตัน)"}),e.jsx("th",{className:"p-5 text-right",children:"เปลี่ยน (MoM)"}),e.jsx("th",{className:"p-5 text-right",children:"ประชากร"}),e.jsx("th",{className:"p-5 text-right",children:"อัตรา (กก./คน)"}),e.jsx("th",{className:"p-5",children:"หมายเหตุ"})]})}),e.jsx("tbody",{className:"text-slate-700 text-sm",children:V.map((t,s)=>{const a=t.population>0?t.amountKg/t.population/30:0,i=V[s+1];let h=0,o=!1;i&&i.amountKg>0&&(h=(t.amountKg-i.amountKg)/i.amountKg*100,o=!0);const f=Math.abs(h)>20&&o;return e.jsxs("tr",{className:`hover:bg-white/60 transition-colors group border-b border-slate-50/50 last:border-none ${f?"bg-amber-50/30":""}`,children:[e.jsx("td",{className:"p-5 pl-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600 font-bold shadow-sm border border-emerald-100 group-hover:scale-110 transition-transform",children:P[t.month-1].substring(0,2)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:P[t.month-1]}),e.jsx("div",{className:"text-xs text-slate-400",children:t.year})]})]})}),e.jsxs("td",{className:"p-5 text-right relative",children:[e.jsx("span",{className:"font-bold text-slate-800 text-base",children:(t.amountKg/1e3).toFixed(2)}),f&&e.jsx("div",{className:"absolute top-3 right-2 text-amber-500 animate-pulse",children:e.jsx(he,{size:10})})]}),e.jsx("td",{className:"p-5 text-right",children:o?e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold border ${h>0?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:[h>0?e.jsx(B,{size:12,strokeWidth:3}):e.jsx(U,{size:12,strokeWidth:3}),Math.abs(h).toFixed(1),"%"]}):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-5 text-right font-medium text-slate-600",children:t.population.toLocaleString()}),e.jsx("td",{className:"p-5 text-right",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:`px-2 py-1 rounded-md text-xs font-bold w-fit ${a>1.2?"bg-red-50 text-red-500":"bg-slate-50 text-slate-600"}`,children:a.toFixed(3)})})}),e.jsx("td",{className:"p-5 text-slate-500 text-xs max-w-xs truncate opacity-70",children:t.note||"-"})]},t.id)})})]})})]})]})]})},L=({title:p,value:k,unit:v,icon:d,color:R,subValue:u,trend:S,customAction:m,badge:F})=>{const j={emerald:{bg:"bg-emerald-50",text:"text-emerald-600",ring:"ring-emerald-100",gradient:"from-emerald-500 to-teal-500"},blue:{bg:"bg-blue-50",text:"text-blue-600",ring:"ring-blue-100",gradient:"from-blue-500 to-cyan-500"},amber:{bg:"bg-amber-50",text:"text-amber-600",ring:"ring-amber-100",gradient:"from-amber-500 to-orange-500"},indigo:{bg:"bg-indigo-50",text:"text-indigo-600",ring:"ring-indigo-100",gradient:"from-indigo-500 to-violet-500"}},N=j[R]||j.emerald;return e.jsxs("div",{className:"glass-panel p-6 rounded-3xl shadow-glass hover:shadow-glass-hover transition-all duration-500 relative overflow-hidden group border border-white/60",children:[e.jsx("div",{className:`absolute -right-10 -top-10 w-32 h-32 bg-gradient-to-br ${N.gradient} rounded-full opacity-[0.08] group-hover:opacity-[0.15] blur-2xl transition-opacity duration-500`}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:`p-3 rounded-2xl ${N.bg} ${N.text} ring-1 ${N.ring} shadow-sm`,children:d}),F&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 bg-white/50 px-2 py-1 rounded-lg border border-white/60 backdrop-blur-sm",children:F})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm text-slate-500 font-semibold mb-1",children:p}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 tracking-tight tabular-nums",children:k}),e.jsx("span",{className:"text-sm text-slate-400 font-bold",children:v})]})]}),u&&e.jsxs("div",{className:`text-xs font-bold mt-3 flex items-center gap-1 w-fit px-2 py-1 rounded-lg ${S==="up"?"bg-red-50 text-red-500":"bg-emerald-50 text-emerald-500"}`,children:[S==="up"?e.jsx(B,{size:14,strokeWidth:3}):e.jsx(U,{size:14,strokeWidth:3}),u]}),m]})};export{Fe as default};
