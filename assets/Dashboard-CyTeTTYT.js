import{j as e,C as le,T as E,e as re,f as oe,g as ne,h as G,i as H,k as ie,l as de,G as ce,m as xe,d as me,n as he,o as pe,p as ge,A as X,q}from"./vendor-wOfPeI0w.js";import{r as l,a as V,C as ue,b as be,X as fe,Y as je,T as B,B as F,A as U,P as ve,c as we,d as Ne,L as ye}from"./recharts-D4o-M-UG.js";import{T as P,a as Ce}from"./types-BFuqyHc6.js";import{g as Te,a as ke}from"./geminiService-cucSakcc.js";import"./react-Bzgz95E1.js";const Le=({records:h,onNavigate:T})=>{const f=new Date().getFullYear()+543,[c,L]=l.useState(f),[u,k]=l.useState(f-1),[x,z]=l.useState(!1),[b,j]=l.useState(""),[v,J]=l.useState(()=>{const t=localStorage.getItem("waste_cost_per_ton");return t?parseFloat(t):500}),[m,Q]=l.useState(()=>{const t=localStorage.getItem("waste_yearly_target");return t?parseFloat(t):500}),[R,A]=l.useState(""),[M,$]=l.useState(!1),[_,Z]=l.useState(new Date),[ee,te]=l.useState(0);l.useEffect(()=>{localStorage.setItem("waste_cost_per_ton",v.toString())},[v]),l.useEffect(()=>{localStorage.setItem("waste_yearly_target",m.toString())},[m]);const W=l.useMemo(()=>{const t=Array.from(new Set(h.map(s=>s.year)));return t.includes(f)||t.push(f),t.sort((s,a)=>a-s)},[h,f]),i=l.useMemo(()=>h.filter(t=>t.year===c).sort((t,s)=>t.month-s.month),[h,c]),Y=l.useMemo(()=>{let t=h.filter(s=>s.year===c);if(b){const s=b.toLowerCase();t=t.filter(a=>P[a.month-1].includes(s)||a.recorderName&&a.recorderName.toLowerCase().includes(s)||a.note&&a.note.toLowerCase().includes(s))}return t.sort((s,a)=>a.timestamp-s.timestamp)},[h,c,b]),p=l.useMemo(()=>h.filter(t=>t.year===u).sort((t,s)=>t.month-s.month),[h,u]),n=l.useMemo(()=>{if(i.length===0)return{totalTon:"0.00",latestRate:"0.00",totalCost:"0",latestPop:"0",variancePercent:0,popVariancePercent:0,hasComparison:!1,avgKgPerDay:0,totalRaw:0};const t=i.reduce((N,D)=>N+D.amountKg,0),s=i[i.length-1],a=s.population>0?s.amountKg/s.population/30:0,r=t/1e3*v;let d=0,o=0,g=!1;if(p.length>0){const N=p.reduce((y,C)=>y+C.amountKg,0),D=i.length>0?i.reduce((y,C)=>y+C.population,0)/i.length:0,I=p.length>0?p.reduce((y,C)=>y+C.population,0)/p.length:0;N>0&&(d=(t-N)/N*100,g=!0),I>0&&(o=(D-I)/I*100)}return{totalRaw:t/1e3,totalTon:(t/1e3).toFixed(2),latestPop:s.population.toLocaleString(),avgKgPerDay:t/(i.length*30),latestRate:a.toFixed(3),totalCost:r.toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:0}),variancePercent:d,popVariancePercent:o,hasComparison:g}},[i,p,v]),w=l.useMemo(()=>{if(m<=0)return 0;const t=n.totalRaw/m*100;return Math.min(t,100)},[n.totalRaw,m]),S=l.useMemo(()=>{let t=0,s=0,a=0,r=0;return i.forEach(o=>{o.composition&&(t+=o.composition.general,s+=o.composition.organic,a+=o.composition.recycle,r+=o.composition.hazardous)}),t+s+a+r===0?[]:[{name:"ทั่วไป",value:t,color:"#60a5fa"},{name:"อินทรีย์",value:s,color:"#34d399"},{name:"รีไซเคิล",value:a,color:"#fbbf24"},{name:"อันตราย",value:r,color:"#f87171"}].filter(o=>o.value>0)},[i]),se=l.useMemo(()=>P.map((t,s)=>{const a=i.find(g=>g.month===s+1),r=p.find(g=>g.month===s+1),d=a&&a.population>0?a.amountKg/a.population/30:0,o=(a==null?void 0:a.composition)||{general:0,organic:0,recycle:0,hazardous:0};return{name:Ce[s],fullName:t,amountTon:a?parseFloat((a.amountKg/1e3).toFixed(2)):0,compareAmountTon:r?parseFloat((r.amountKg/1e3).toFixed(2)):0,rate:parseFloat(d.toFixed(3)),genTon:parseFloat((o.general/1e3).toFixed(2)),orgTon:parseFloat((o.organic/1e3).toFixed(2)),recTon:parseFloat((o.recycle/1e3).toFixed(2)),hazTon:parseFloat((o.hazardous/1e3).toFixed(2)),targetLine:(m/12).toFixed(2)}}),[i,p,m]);l.useEffect(()=>{const t=setInterval(()=>{const s=new Date;if(Z(s),n.avgKgPerDay){const a=new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime(),r=(s.getTime()-a)/1e3;te(n.avgKgPerDay/86400*r)}},1e3);return()=>clearInterval(t)},[n.avgKgPerDay]);const ae=async()=>{$(!0);const t=x&&i.length>0&&p.length>0?await Te(c,i,u,p):await ke(i);A(t),$(!1)},O=({active:t,payload:s,label:a})=>t&&s&&s.length?e.jsxs("div",{className:"glass-panel p-4 rounded-2xl shadow-xl border border-white/60",children:[e.jsx("p",{className:"text-slate-800 font-bold text-sm mb-2",children:a}),s.map((r,d)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs mb-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:r.color}}),e.jsxs("span",{className:"text-slate-500",children:[r.name,":"]}),e.jsxs("span",{className:"font-bold text-slate-700",children:[r.value.toLocaleString(void 0,{minimumFractionDigits:2})," ",r.unit||"ตัน"]})]},d))]}):null;return e.jsxs("div",{className:"space-y-8 pb-20 animate-slide-up",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 relative rounded-3xl overflow-hidden bg-gradient-to-br from-slate-800 to-slate-900 shadow-2xl shadow-slate-300/50 p-[1px]",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')] opacity-10 mix-blend-overlay"}),e.jsx("div",{className:"absolute top-0 right-0 w-[500px] h-[500px] bg-emerald-500/30 rounded-full blur-[120px] -mr-32 -mt-32 animate-pulse-slow pointer-events-none"}),e.jsxs("div",{className:"relative z-10 bg-slate-900/50 backdrop-blur-sm rounded-[23px] p-8 md:p-10 flex flex-col md:flex-row justify-between items-center gap-6 h-full",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("div",{className:"p-4 bg-white/5 backdrop-blur-md rounded-2xl border border-white/10 shadow-inner ring-1 ring-white/5",children:e.jsx(le,{size:32,className:"text-emerald-300"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-4xl xl:text-5xl font-bold text-white tracking-tighter tabular-nums leading-none",children:_.toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})}),e.jsx("p",{className:"text-slate-400 font-medium mt-2 text-lg",children:_.toLocaleDateString("th-TH",{weekday:"long",day:"numeric",month:"long",year:"numeric"})}),e.jsxs("div",{className:"flex items-center gap-2 mt-4 text-xs font-medium text-slate-500 bg-slate-800/50 px-3 py-1 rounded-full w-fit border border-white/5",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-500 animate-pulse"}),"Last updated: ",new Date().toLocaleTimeString("th-TH",{hour:"2-digit",minute:"2-digit"})]})]})]}),e.jsxs("div",{className:"glass-panel bg-white/5 border-white/10 p-6 rounded-2xl w-full md:w-auto min-w-[220px] relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-20 h-20 bg-emerald-500/20 blur-2xl rounded-full -mr-5 -mt-5 group-hover:bg-emerald-400/30 transition-colors"}),e.jsx("p",{className:"text-slate-400 text-[10px] uppercase tracking-widest font-bold mb-3",children:"Est. Waste Today"}),e.jsxs("div",{className:"flex items-end justify-between relative z-10",children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-3xl xl:text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-emerald-200 to-emerald-400 tabular-nums tracking-tight",children:ee.toFixed(2)}),e.jsx("span",{className:"text-sm font-bold text-emerald-600/70",children:"kg"})]}),e.jsxs("div",{className:"flex flex-col items-end gap-1",children:[e.jsx("div",{className:"h-2 w-2 rounded-full bg-emerald-400 animate-pulse shadow-[0_0_10px_rgba(52,211,153,0.8)]"}),e.jsx("span",{className:"text-[10px] text-emerald-500/70 font-medium",children:"Live"})]})]})]})]})]}),e.jsxs("div",{className:"glass-panel rounded-3xl p-6 border border-white/60 flex flex-col justify-between",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-800 font-bold text-lg",children:[e.jsx(E,{className:"text-rose-500",size:20}),e.jsx("h3",{children:"Yearly Target"})]}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Goal vs Actual (Ton)"})]}),e.jsxs("div",{className:"bg-rose-50 p-2 rounded-xl text-rose-500 cursor-pointer hover:bg-rose-100 transition-colors group relative",children:[e.jsx(E,{size:20}),e.jsxs("div",{className:"absolute right-0 top-full mt-2 w-48 bg-white p-3 rounded-xl shadow-xl border border-slate-100 opacity-0 group-hover:opacity-100 invisible group-hover:visible transition-all z-50",children:[e.jsx("label",{className:"text-xs font-bold text-slate-600 block mb-1",children:"Set Limit (Ton/Year)"}),e.jsx("input",{type:"number",value:m,onChange:t=>Q(Number(t.target.value)),className:"w-full border border-slate-200 rounded-lg p-1.5 text-sm font-bold text-slate-700"})]})]})]}),e.jsxs("div",{className:"flex-1 flex flex-col justify-center",children:[e.jsxs("div",{className:"flex justify-between items-end mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-slate-800",children:n.totalTon}),e.jsxs("span",{className:"text-sm font-bold text-slate-400",children:["/ ",m," Ton"]})]}),e.jsx("div",{className:"h-4 bg-slate-100 rounded-full overflow-hidden shadow-inner",children:e.jsx("div",{className:`h-full rounded-full transition-all duration-1000 ease-out ${w>100?"bg-red-500":w>80?"bg-amber-400":"bg-emerald-500"}`,style:{width:`${w}%`}})}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs font-bold",children:[e.jsxs("span",{className:`${w>100?"text-red-500":"text-emerald-600"}`,children:[w.toFixed(1),"% Used"]}),e.jsx("span",{className:"text-slate-400",children:m-n.totalRaw>0?`${(m-n.totalRaw).toFixed(2)} Ton left`:"Over Limit!"})]})]})]})]}),e.jsxs("div",{className:"glass-panel p-2 rounded-2xl shadow-glass flex flex-col xl:flex-row justify-between gap-3 sticky top-4 z-30 transition-all duration-300",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2 p-1",children:[e.jsxs("div",{className:"relative group w-full md:w-64",children:[e.jsx(re,{size:16,className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-slate-400 group-focus-within:text-emerald-500 transition-colors"}),e.jsx("input",{type:"text",value:b,onChange:t=>j(t.target.value),placeholder:"ค้นหาข้อมูล...",className:"w-full pl-10 pr-4 py-2.5 bg-white/50 hover:bg-white border border-transparent hover:border-slate-200 focus:bg-white focus:border-emerald-200 rounded-xl text-sm font-medium outline-none transition-all placeholder:text-slate-400"})]}),e.jsx("div",{className:"h-8 w-[1px] bg-slate-200 mx-1 hidden md:block"}),e.jsxs("div",{className:"flex items-center gap-2 bg-white/50 px-1 p-1 rounded-xl border border-slate-100",children:[e.jsx("select",{value:c,onChange:t=>L(parseInt(t.target.value)),className:"bg-transparent py-1.5 pl-3 pr-8 font-bold text-slate-700 outline-none cursor-pointer text-sm hover:text-emerald-600 transition-colors appearance-none",children:W.map(t=>e.jsxs("option",{value:t,children:["ปี ",t]},t))}),e.jsx(oe,{size:14,className:"absolute right-3 pointer-events-none text-slate-400"})]}),e.jsxs("button",{onClick:()=>z(!x),className:`flex items-center gap-2 px-4 py-2.5 rounded-xl text-xs font-bold uppercase tracking-wider transition-all ${x?"bg-indigo-50 text-indigo-600 shadow-inner":"text-slate-500 hover:bg-slate-50 hover:text-slate-700"}`,children:[e.jsx(ne,{size:14})," ",x?"เปรียบเทียบ On":"เปรียบเทียบ"]}),x&&e.jsx("select",{value:u,onChange:t=>k(parseInt(t.target.value)),className:"bg-indigo-50 py-2 px-3 rounded-xl font-bold text-indigo-600 outline-none text-sm border border-indigo-100 cursor-pointer animate-fade-in",children:W.filter(t=>t!==c).map(t=>e.jsxs("option",{value:t,children:["เทียบกับ ",t]},t))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-1",children:[e.jsxs("button",{onClick:ae,className:"flex items-center gap-2 px-4 py-2.5 bg-white text-indigo-600 rounded-xl hover:shadow-md transition-all text-sm font-bold border border-indigo-100 group",children:[e.jsx(G,{size:16,className:"group-hover:scale-110 transition-transform text-indigo-500"}),e.jsx("span",{className:"bg-gradient-to-r from-indigo-600 to-violet-600 bg-clip-text text-transparent",children:"Gemini Insight"})]}),e.jsxs("button",{onClick:()=>T("entry"),className:"flex items-center gap-2 px-5 py-2.5 bg-gradient-to-r from-emerald-500 to-teal-500 text-white rounded-xl shadow-lg shadow-emerald-500/30 transition-all text-sm font-bold hover:-translate-y-0.5 hover:shadow-emerald-500/40 active:scale-95",children:[e.jsx(H,{size:18})," บันทึกข้อมูล"]})]})]}),(R||M)&&e.jsx("div",{className:"relative overflow-hidden rounded-2xl p-[1px] bg-gradient-to-r from-indigo-500 via-purple-500 to-pink-500 animate-fade-in shadow-lg",children:e.jsxs("div",{className:"bg-white/95 backdrop-blur-xl rounded-[15px] p-6 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-indigo-100 rounded-full blur-3xl opacity-60 -mr-20 -mt-20 pointer-events-none"}),e.jsxs("div",{className:"flex gap-5 relative z-10",children:[e.jsx("div",{className:"bg-gradient-to-br from-indigo-100 to-white p-3 rounded-2xl text-indigo-600 shrink-0 shadow-sm h-fit border border-indigo-50",children:e.jsx(G,{size:24})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-bold text-indigo-900 mb-2 flex items-center gap-2 text-lg",children:["AI Analysis ",e.jsx("span",{className:"text-[10px] bg-indigo-100 text-indigo-600 px-2 py-0.5 rounded-full uppercase tracking-widest font-bold",children:"Gemini 2.5 Flash"})]}),M?e.jsxs("div",{className:"flex items-center gap-2 text-slate-500 text-sm py-2",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-bounce"})," กำลังวิเคราะห์ข้อมูลรูปแบบ..."]}):e.jsx("p",{className:"text-slate-600 text-sm leading-7 font-medium",children:R})]}),e.jsx("button",{onClick:()=>A(""),className:"text-slate-300 hover:text-slate-500 transition-colors h-fit p-1 hover:bg-slate-100 rounded-lg",children:"×"})]})]})}),i.length===0&&!b?e.jsxs("div",{className:"glass-panel rounded-3xl p-20 text-center border-dashed border-2 border-slate-300/50 flex flex-col items-center justify-center min-h-[400px]",children:[e.jsx("div",{className:"w-24 h-24 bg-slate-50 rounded-full flex items-center justify-center mb-6 shadow-inner",children:e.jsx(ie,{className:"text-slate-300",size:48})}),e.jsxs("h3",{className:"text-2xl font-bold text-slate-700 mb-2",children:["ไม่มีข้อมูลสำหรับปี ",c]}),e.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:"เริ่มบันทึกข้อมูลการจัดการขยะเพื่อปลดล็อกข้อมูลเชิงลึกและการวิเคราะห์ที่มีประสิทธิภาพ"}),e.jsxs("button",{onClick:()=>T("entry"),className:"inline-flex items-center gap-2 px-8 py-4 bg-emerald-600 text-white rounded-2xl hover:bg-emerald-700 font-bold shadow-xl shadow-emerald-500/20 hover:shadow-emerald-500/40 transition-all hover:-translate-y-1",children:[e.jsx(H,{size:20})," บันทึกข้อมูลแรก"]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-6",children:[e.jsx(K,{title:"ปริมาณขยะรวม",value:n.totalTon,unit:"ตัน",icon:e.jsx(de,{size:24}),color:"emerald",subValue:x&&n.hasComparison?`${Math.abs(n.variancePercent).toFixed(1)}%`:void 0,trend:n.variancePercent>0?"up":"down"}),e.jsx(K,{title:"อัตราการเกิดขยะ",value:n.latestRate,unit:"กก./คน/วัน",icon:e.jsx(ce,{size:24}),color:"blue",badge:"ประสิทธิภาพ"}),e.jsx(K,{title:"งบประมาณ (ประมาณการ)",value:`฿${n.totalCost}`,unit:"",icon:e.jsx(xe,{size:24}),color:"amber",customAction:e.jsxs("div",{className:"flex items-center gap-2 bg-white/60 backdrop-blur-sm rounded-lg px-3 py-1 mt-3 border border-amber-100/50",children:[e.jsx("span",{className:"text-[10px] text-slate-500 font-bold uppercase tracking-wide",children:"ต้นทุน/ตัน:"}),e.jsx("input",{type:"number",value:v,onChange:t=>J(parseFloat(t.target.value)||0),className:"w-16 bg-transparent text-right text-xs font-bold text-amber-700 outline-none border-b border-amber-300/50 focus:border-amber-500"})]})}),e.jsx(K,{title:"จำนวนประชากร",value:n.latestPop,unit:"คน",icon:e.jsx(me,{size:24}),color:"indigo",subValue:x&&n.hasComparison?`${Math.abs(n.popVariancePercent).toFixed(1)}%`:void 0,trend:n.popVariancePercent>0?"up":"down"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"glass-panel rounded-3xl p-6 lg:col-span-2 flex flex-col",children:[e.jsx("div",{className:"flex items-center justify-between mb-8",children:e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-emerald-500 rounded-full shadow-glow"}),"แนวโน้มรายเดือน"]}),e.jsx("p",{className:"text-xs text-slate-400 pl-3 mt-1 font-medium",children:"ปริมาณขยะ (ตัน) แยกรายเดือน"})]})}),e.jsx("div",{className:"h-[350px] w-full",children:e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(ue,{data:se,margin:{top:10,right:10,left:-20,bottom:0},children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"colorTon",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"colorCompare",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#6366f1",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#6366f1",stopOpacity:0})]})]}),e.jsx(be,{strokeDasharray:"3 3",stroke:"rgba(0,0,0,0.04)",vertical:!1}),e.jsx(fe,{dataKey:"name",tick:{fontSize:12,fill:"#94a3b8",fontWeight:500},axisLine:!1,tickLine:!1,dy:10}),e.jsx(je,{tick:{fontSize:12,fill:"#94a3b8",fontWeight:500},axisLine:!1,tickLine:!1}),e.jsx(B,{content:e.jsx(O,{}),cursor:{fill:"rgba(0,0,0,0.02)"}}),!x&&S.length>0?e.jsxs(e.Fragment,{children:[e.jsx(F,{dataKey:"genTon",stackId:"a",fill:"#60a5fa",name:"ทั่วไป",radius:[0,0,0,0],barSize:30}),e.jsx(F,{dataKey:"orgTon",stackId:"a",fill:"#34d399",name:"อินทรีย์",barSize:30}),e.jsx(F,{dataKey:"recTon",stackId:"a",fill:"#fbbf24",name:"รีไซเคิล",barSize:30}),e.jsx(F,{dataKey:"hazTon",stackId:"a",fill:"#f87171",name:"อันตราย",radius:[6,6,0,0],barSize:30})]}):e.jsxs(e.Fragment,{children:[e.jsx(U,{type:"monotone",dataKey:"amountTon",stroke:"#10b981",strokeWidth:4,fillOpacity:1,fill:"url(#colorTon)",name:`ปี ${c}`}),x&&e.jsx(U,{type:"monotone",dataKey:"compareAmountTon",stroke:"#818cf8",strokeWidth:3,strokeDasharray:"5 5",fill:"url(#colorCompare)",name:`ปี ${u}`})]})]})})})]}),e.jsxs("div",{className:"glass-panel rounded-3xl p-6 flex flex-col relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-blue-50 rounded-full -mr-10 -mt-10 opacity-50"}),e.jsxs("div",{className:"mb-4 relative z-10",children:[e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-6 bg-blue-500 rounded-full shadow-glow"}),"องค์ประกอบขยะ"]}),e.jsx("p",{className:"text-xs text-slate-400 pl-3 mt-1 font-medium",children:"สัดส่วนแยกตามประเภท"})]}),e.jsx("div",{className:"flex-1 min-h-[250px] relative flex items-center justify-center",children:S.length>0?e.jsx(V,{width:"100%",height:"100%",children:e.jsxs(ve,{children:[e.jsx(we,{data:S,innerRadius:70,outerRadius:90,paddingAngle:8,dataKey:"value",stroke:"none",cornerRadius:8,children:S.map((t,s)=>e.jsx(Ne,{fill:t.color,style:{filter:"drop-shadow(0px 6px 10px rgba(0,0,0,0.1))"}},`cell-${s}`))}),e.jsx(B,{content:e.jsx(O,{})}),e.jsx(ye,{verticalAlign:"bottom",height:36,iconType:"circle",iconSize:8,formatter:t=>e.jsx("span",{className:"text-xs font-bold text-slate-600 ml-1",children:t})})]})}):e.jsxs("div",{className:"text-center text-slate-300 flex flex-col items-center justify-center h-full",children:[e.jsx("div",{className:"p-4 bg-slate-50 rounded-full mb-2",children:e.jsx(he,{size:32,className:"opacity-50"})}),e.jsx("p",{className:"text-xs font-medium",children:"ไม่มีข้อมูลองค์ประกอบขยะ"})]})})]})]}),e.jsxs("div",{className:"glass-panel rounded-3xl overflow-hidden mt-8 shadow-glass border border-white/60",children:[e.jsx("div",{className:"p-6 border-b border-slate-100 flex items-center justify-between bg-white/40 backdrop-blur-sm",children:e.jsxs("h3",{className:"text-lg font-bold text-slate-800 flex items-center gap-2",children:[e.jsx(pe,{size:20,className:"text-slate-400"})," บันทึกข้อมูลละเอียด"]})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-slate-400 text-[10px] uppercase tracking-widest font-bold border-b border-slate-100/50",children:[e.jsx("th",{className:"p-5 pl-8",children:"เดือน/ปี"}),e.jsx("th",{className:"p-5 text-right",children:"ปริมาณ (ตัน)"}),e.jsx("th",{className:"p-5 text-right",children:"เปลี่ยน (MoM)"}),e.jsx("th",{className:"p-5 text-right",children:"ประชากร"}),e.jsx("th",{className:"p-5 text-right",children:"อัตรา (กก./คน)"}),e.jsx("th",{className:"p-5",children:"หมายเหตุ"})]})}),e.jsx("tbody",{className:"text-slate-700 text-sm",children:Y.map((t,s)=>{const a=t.population>0?t.amountKg/t.population/30:0,r=Y[s+1];let d=0,o=!1;r&&r.amountKg>0&&(d=(t.amountKg-r.amountKg)/r.amountKg*100,o=!0);const g=Math.abs(d)>20&&o;return e.jsxs("tr",{className:`hover:bg-white/60 transition-colors group border-b border-slate-50/50 last:border-none ${g?"bg-amber-50/30":""}`,children:[e.jsx("td",{className:"p-5 pl-8",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-emerald-50 flex items-center justify-center text-emerald-600 font-bold shadow-sm border border-emerald-100 group-hover:scale-110 transition-transform",children:P[t.month-1].substring(0,2)}),e.jsxs("div",{children:[e.jsx("div",{className:"font-bold text-slate-800",children:P[t.month-1]}),e.jsx("div",{className:"text-xs text-slate-400",children:t.year})]})]})}),e.jsxs("td",{className:"p-5 text-right relative",children:[e.jsx("span",{className:"font-bold text-slate-800 text-base",children:(t.amountKg/1e3).toFixed(2)}),g&&e.jsx("div",{className:"absolute top-3 right-2 text-amber-500 animate-pulse",children:e.jsx(ge,{size:10})})]}),e.jsx("td",{className:"p-5 text-right",children:o?e.jsxs("span",{className:`inline-flex items-center gap-1 px-2.5 py-1 rounded-full text-xs font-bold border ${d>0?"bg-red-50 text-red-600 border-red-100":"bg-emerald-50 text-emerald-600 border-emerald-100"}`,children:[d>0?e.jsx(X,{size:12,strokeWidth:3}):e.jsx(q,{size:12,strokeWidth:3}),Math.abs(d).toFixed(1),"%"]}):e.jsx("span",{className:"text-slate-300",children:"-"})}),e.jsx("td",{className:"p-5 text-right font-medium text-slate-600",children:t.population.toLocaleString()}),e.jsx("td",{className:"p-5 text-right",children:e.jsx("div",{className:"flex justify-end",children:e.jsx("div",{className:`px-2 py-1 rounded-md text-xs font-bold w-fit ${a>1.2?"bg-red-50 text-red-500":"bg-slate-50 text-slate-600"}`,children:a.toFixed(3)})})}),e.jsx("td",{className:"p-5 text-slate-500 text-xs max-w-xs truncate opacity-70",children:t.note||"-"})]},t.id)})})]})})]})]})]})},K=({title:h,value:T,unit:f,icon:c,color:L,subValue:u,trend:k,customAction:x,badge:z})=>{const b={emerald:{bg:"bg-emerald-50",text:"text-emerald-600",ring:"ring-emerald-100",gradient:"from-emerald-500 to-teal-500"},blue:{bg:"bg-blue-50",text:"text-blue-600",ring:"ring-blue-100",gradient:"from-blue-500 to-cyan-500"},amber:{bg:"bg-amber-50",text:"text-amber-600",ring:"ring-amber-100",gradient:"from-amber-500 to-orange-500"},indigo:{bg:"bg-indigo-50",text:"text-indigo-600",ring:"ring-indigo-100",gradient:"from-indigo-500 to-violet-500"}},j=b[L]||b.emerald;return e.jsxs("div",{className:"glass-panel p-6 rounded-3xl shadow-glass hover:shadow-glass-hover transition-all duration-500 relative overflow-hidden group border border-white/60",children:[e.jsx("div",{className:`absolute -right-10 -top-10 w-32 h-32 bg-gradient-to-br ${j.gradient} rounded-full opacity-[0.08] group-hover:opacity-[0.15] blur-2xl transition-opacity duration-500`}),e.jsxs("div",{className:"flex justify-between items-start mb-4 relative z-10",children:[e.jsx("div",{className:`p-3 rounded-2xl ${j.bg} ${j.text} ring-1 ${j.ring} shadow-sm`,children:c}),z&&e.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider text-slate-400 bg-white/50 px-2 py-1 rounded-lg border border-white/60 backdrop-blur-sm",children:z})]}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("p",{className:"text-sm text-slate-500 font-semibold mb-1",children:h}),e.jsxs("div",{className:"flex items-baseline gap-1.5",children:[e.jsx("h3",{className:"text-3xl font-bold text-slate-800 tracking-tight tabular-nums",children:T}),e.jsx("span",{className:"text-sm text-slate-400 font-bold",children:f})]})]}),u&&e.jsxs("div",{className:`text-xs font-bold mt-3 flex items-center gap-1 w-fit px-2 py-1 rounded-lg ${k==="up"?"bg-red-50 text-red-500":"bg-emerald-50 text-emerald-500"}`,children:[k==="up"?e.jsx(X,{size:14,strokeWidth:3}):e.jsx(q,{size:14,strokeWidth:3}),u]}),x]})};export{Le as default};
