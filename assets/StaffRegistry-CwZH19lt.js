import{j as e,d as v,e as A,O as B,Q as g,V as w,W as f,X as P,Y as y,Z as z,v as U,_ as F}from"./vendor-BO12qksW.js";import{r as n}from"./recharts-D4o-M-UG.js";import"./react-Bzgz95E1.js";const W=({identities:j,onAddIdentity:C,onRemoveIdentities:m,onEditIdentity:p,onClearRegistry:h})=>{const[d,o]=n.useState(""),[c,x]=n.useState(""),[b,S]=n.useState(""),[t,u]=n.useState(null),[l,i]=n.useState([]),k=s=>{s.preventDefault(),d.trim()&&c.trim()&&(t!==null&&p?(p(t,d.trim(),c.trim()),u(null)):C(d.trim(),c.trim()),o(""),x(""))},I=(s,a)=>{u(s),o(a.name),x(a.position),window.scrollTo({top:0,behavior:"smooth"})},N=()=>{u(null),o(""),x("")},$=()=>{t!==null&&window.confirm("ยืนยันการลบรายชื่อนี้?")&&(m([t]),N())},E=s=>{i(a=>a.includes(s)?a.filter(T=>T!==s):[...a,s])},q=()=>{l.length===r.length?i([]):i(r.map(s=>s.originalIndex))},D=()=>{l.length!==0&&window.confirm(`คุณต้องการลบรายชื่อที่เลือกทั้งหมด ${l.length} รายการหรือไม่?`)&&(m(l),i([]))},L=()=>{window.confirm('คำเตือน: คุณต้องการลบรายชื่อบุคลากร "ทั้งหมด" ใช่หรือไม่? การกระทำนี้ไม่สามารถย้อนกลับได้')&&h&&(h(),i([]))},r=j.map((s,a)=>({...s,originalIndex:a})).filter(s=>s.name.toLowerCase().includes(b.toLowerCase())||s.position.toLowerCase().includes(b.toLowerCase()));return e.jsxs("div",{className:"max-w-5xl mx-auto pb-20 animate-fade-in",children:[e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center justify-between mb-8 gap-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-slate-800 flex items-center gap-3",children:[e.jsx(v,{className:"text-emerald-600",size:28}),"ทะเบียนบุคลากร (Staff Registry)"]}),e.jsx("p",{className:"text-slate-500 mt-1",children:"จัดการรายชื่อผู้บันทึกข้อมูลและผู้จัดทำรายงานของเทศบาล"})]}),e.jsxs("div",{className:"flex items-center gap-3 w-full md:w-auto",children:[e.jsxs("div",{className:"bg-white p-2 rounded-lg border border-slate-200 shadow-sm flex items-center gap-2 flex-1 md:w-64",children:[e.jsx(A,{size:18,className:"text-slate-400 ml-1"}),e.jsx("input",{type:"text",placeholder:"ค้นหารายชื่อ...",value:b,onChange:s=>S(s.target.value),className:"w-full outline-none text-sm bg-transparent"})]}),h&&j.length>0&&e.jsxs("button",{onClick:L,className:"px-3 py-2 rounded-lg border border-red-200 text-red-600 bg-red-50 hover:bg-red-100 text-sm font-bold flex items-center gap-2 transition-colors",children:[e.jsx(B,{size:16})," ล้างทั้งหมด"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`p-6 rounded-2xl shadow-sm border sticky top-6 transition-colors ${t!==null?"bg-amber-50 border-amber-200":"bg-white border-slate-100"}`,children:[e.jsxs("h2",{className:`font-bold text-lg mb-6 flex items-center gap-2 ${t!==null?"text-amber-800":"text-slate-800"}`,children:[t!==null?e.jsx(g,{size:20}):e.jsx(w,{size:20,className:"text-emerald-600"}),t!==null?"แก้ไขข้อมูล":"เพิ่มรายชื่อใหม่"]}),e.jsxs("form",{onSubmit:k,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"ชื่อ-นามสกุล"}),e.jsx("input",{type:"text",value:d,onChange:s=>o(s.target.value),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none bg-white",placeholder:"ระบุชื่อ-นามสกุล",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"ตำแหน่ง"}),e.jsx("input",{type:"text",value:c,onChange:s=>x(s.target.value),className:"w-full p-3 border border-slate-200 rounded-xl focus:ring-2 focus:ring-emerald-500 outline-none bg-white",placeholder:"ระบุตำแหน่งงาน",required:!0})]}),e.jsxs("div",{className:"flex gap-2",children:[t!==null&&e.jsx("button",{type:"button",onClick:$,className:"px-3 py-3 bg-red-50 border border-red-200 text-red-600 rounded-xl font-bold hover:bg-red-100 transition-colors",title:"ลบรายชื่อนี้",children:e.jsx(f,{size:18})}),t!==null&&e.jsxs("button",{type:"button",onClick:N,className:"flex-1 py-3 bg-white border border-slate-300 text-slate-600 rounded-xl font-bold hover:bg-slate-50 transition-colors flex justify-center items-center gap-2",children:[e.jsx(P,{size:18})," ยกเลิก"]}),e.jsxs("button",{type:"submit",className:`flex-1 py-3 text-white rounded-xl font-bold transition-colors shadow-lg flex justify-center items-center gap-2 ${t!==null?"bg-amber-600 hover:bg-amber-700 shadow-amber-900/10":"bg-emerald-600 hover:bg-emerald-700 shadow-emerald-900/10"}`,children:[t!==null?e.jsx(g,{size:18}):e.jsx(w,{size:18}),t!==null?"อัปเดต":"บันทึก"]})]})]})]})}),e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 bg-slate-50 border-b border-slate-100 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:q,className:"text-slate-500 hover:text-emerald-600",children:l.length>0&&l.length===r.length?e.jsx(y,{size:20,className:"text-emerald-600"}):e.jsx(z,{size:20})}),e.jsxs("span",{className:"text-sm font-bold text-slate-500 uppercase tracking-wider",children:["รายชื่อในระบบ (",r.length,")"]})]}),l.length>0&&e.jsxs("button",{onClick:D,className:"text-xs bg-red-50 text-red-600 px-3 py-1.5 rounded-lg font-bold hover:bg-red-100 transition-colors flex items-center gap-1",children:[e.jsx(f,{size:14})," ลบที่เลือก (",l.length,")"]})]}),r.length===0?e.jsxs("div",{className:"p-12 text-center text-slate-400",children:[e.jsx(v,{size:48,className:"mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"ไม่พบข้อมูลบุคลากร"})]}):e.jsx("div",{className:"divide-y divide-slate-50",children:r.map(s=>e.jsxs("div",{className:`p-4 hover:bg-slate-50 transition-colors flex items-center justify-between group ${t===s.originalIndex?"bg-amber-50":""}`,children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("button",{onClick:()=>E(s.originalIndex),className:"text-slate-300 hover:text-emerald-500",children:l.includes(s.originalIndex)?e.jsx(y,{size:20,className:"text-emerald-600"}):e.jsx(z,{size:20})}),e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-bold border ${t===s.originalIndex?"bg-amber-100 text-amber-600 border-amber-200":"bg-slate-100 text-slate-500 border-slate-200"}`,children:s.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:`font-bold ${t===s.originalIndex?"text-amber-800":"text-slate-800"}`,children:s.name}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(U,{size:12}),s.position]})]})]}),e.jsxs("div",{className:"flex gap-1 transition-opacity",children:[e.jsx("button",{onClick:()=>I(s.originalIndex,s),className:"p-2 text-slate-400 hover:text-emerald-600 hover:bg-emerald-50 rounded-lg transition-all",children:e.jsx(g,{size:18})}),e.jsx("button",{onClick:()=>{window.confirm("ยืนยันการลบรายชื่อนี้?")&&m([s.originalIndex])},className:"p-2 text-slate-400 hover:text-red-500 hover:bg-red-50 rounded-lg transition-all",children:e.jsx(f,{size:18})})]})]},s.originalIndex))})]}),e.jsxs("div",{className:"mt-4 bg-blue-50 border border-blue-100 p-4 rounded-xl flex items-start gap-3",children:[e.jsx(F,{className:"text-blue-500 mt-0.5 shrink-0",size:20}),e.jsxs("div",{className:"text-sm text-blue-900",children:[e.jsx("p",{className:"font-bold mb-1",children:"ความสำคัญของทะเบียนบุคลากร"}),e.jsx("p",{className:"opacity-80",children:'รายชื่อในหน้านี้จะถูกนำไปแสดงใน "รายการเลือก" (Dropdown) ของหน้าบันทึกข้อมูลและหน้าจัดทำรายงานโดยอัตโนมัติ'})]})]})]})]})]})};export{W as default};
