import{j as e,U as ue,P as Te,D as ze,z as ke,H as pe,g as Ie,I as Oe,w as $e,J as De,N as Ee,O as Ke,Q as Re,R as he,d as Ge,b as ge,V as Me,W as Ae,p as Pe}from"./vendor-B7q0vjU3.js";import{r as o}from"./recharts-Crih3Ma1.js";import{W as r,T as Q}from"./types-BFuqyHc6.js";import{i as Ve,s as We}from"./index-BCcmyn91.js";import"./react-Bzgz95E1.js";const qe=({onAddRecord:be,onImportRecords:fe,savedIdentities:O,existingRecords:_})=>{const ve=new Date().getFullYear()+543,[d,V]=o.useState(()=>{const t=localStorage.getItem("waste_draft_month");return t?parseInt(t):new Date().getMonth()+1}),[u,X]=o.useState(()=>{const t=localStorage.getItem("waste_draft_year");return t?parseInt(t):ve}),[c,h]=o.useState(""),[m,K]=o.useState(r.TON),[W,R]=o.useState(""),[j,g]=o.useState(""),[w,b]=o.useState(""),[y,f]=o.useState(""),[S,v]=o.useState(""),[Z,T]=o.useState(""),[F,L]=o.useState(()=>localStorage.getItem("waste_draft_recorder_name")||""),[$,G]=o.useState(()=>localStorage.getItem("waste_draft_recorder_pos")||""),[M,D]=o.useState(!1),[z,A]=o.useState(!1),[B,ee]=o.useState("manual"),te=o.useRef(null),[k,H]=o.useState(null),[U,E]=o.useState(null),[P,se]=o.useState(!1),[Y,q]=o.useState(null),ae=Ve();o.useEffect(()=>{localStorage.setItem("waste_draft_recorder_name",F),localStorage.setItem("waste_draft_recorder_pos",$)},[F,$]),o.useEffect(()=>{if(!c||!u||!d){E(null);return}const t=d===1?12:d-1,s=d===1?u-1:u,a=_.find(n=>n.month===t&&n.year===s);if(a){const n=m===r.TON?parseFloat(c)*1e3:parseFloat(c),p=a.amountKg,l=Math.abs((n-p)/p*100);l>30?E(`คำเตือน: ปริมาณขยะต่างจากเดือนก่อนหน้าถึง ${l.toFixed(0)}% (ปกติไม่ควรเกิน 30%) โปรดตรวจสอบความถูกต้อง`):E(null)}else E(null)},[c,m,d,u,_]),o.useEffect(()=>{const t=_.find(s=>s.month===d&&s.year===u);if(t){H(t.id);const s=t.amountKg>1e4;if(h(s?(t.amountKg/1e3).toFixed(2):t.amountKg.toString()),K(s?r.TON:r.KG),R(t.population.toString()),t.composition){const a=s?1e3:1;g((t.composition.general/a).toFixed(2)),b((t.composition.organic/a).toFixed(2)),f((t.composition.recycle/a).toFixed(2)),v((t.composition.hazardous/a).toFixed(2))}else g(""),b(""),f(""),v("");T(t.note||""),t.recorderName&&L(t.recorderName),t.recorderPosition&&G(t.recorderPosition),A(!1)}else H(null),h(""),g(""),b(""),f(""),v(""),T(""),A(!1)},[d,u,_]);const Ne=()=>{const t=parseFloat(j)||0,s=parseFloat(w)||0,a=parseFloat(y)||0,n=parseFloat(S)||0,p=t+s+a+n;h(p.toFixed(2))},je=t=>{const s=t.target.value;L(s);const a=O.find(n=>n.name===s);a&&G(a.position)},le=t=>{const s=parseFloat(c),a=m===r.KG&&t===r.TON?.001:m===r.TON&&t===r.KG?1e3:1;!isNaN(s)&&c!==""&&(m===r.KG&&t===r.TON?h((s/1e3).toString()):m===r.TON&&t===r.KG&&h((s*1e3).toFixed(0))),a!==1&&(j&&g((parseFloat(j)*a).toFixed(2)),w&&b((parseFloat(w)*a).toFixed(2)),y&&f((parseFloat(y)*a).toFixed(2)),S&&v((parseFloat(S)*a).toFixed(2))),K(t)},oe=()=>{localStorage.setItem("waste_draft_month",d.toString()),localStorage.setItem("waste_draft_year",u.toString()),localStorage.setItem("waste_draft_amount",c),localStorage.setItem("waste_draft_pop",W),localStorage.setItem("waste_draft_recorder_name",F),localStorage.setItem("waste_draft_recorder_pos",$),A(!0),setTimeout(()=>A(!1),2e3)},we=()=>{const t=(Math.random()*40+25).toFixed(2);h(t),K(r.TON);const s=Math.floor(12e3+(Math.random()*1e3-500));R(s.toString());const a=parseFloat(t);if(g((a*.5).toFixed(2)),b((a*.3).toFixed(2)),f((a*.15).toFixed(2)),v((a*.05).toFixed(2)),O.length>0){const n=O[Math.floor(Math.random()*O.length)];L(n.name),G(n.position)}},re=async(t,s=!1)=>{t.preventDefault(),!(U&&!confirm("ระบบตรวจพบค่าผิดปกติ (Outlier) คุณยืนยันที่จะบันทึกข้อมูลนี้หรือไม่?"))&&(D(!0),q(null),setTimeout(async()=>{const a=parseFloat(c),n=parseInt(W);if(isNaN(a)||isNaN(n)){alert("กรุณากรอกตัวเลขให้ถูกต้อง"),D(!1);return}const p=m===r.TON?a*1e3:a;let l;if(j||w||y||S){const x=m===r.TON?1e3:1;l={general:(parseFloat(j)||0)*x,organic:(parseFloat(w)||0)*x,recycle:(parseFloat(y)||0)*x,hazardous:(parseFloat(S)||0)*x}}const i={id:k||Date.now().toString(),month:d,year:u,amountKg:p,population:n,timestamp:Date.now(),recorderName:F.trim(),recorderPosition:$.trim(),composition:l,note:Z.trim()};if(be(i,s),ae)try{se(!0);const x={...i,year:i.year-543,generalWaste:((l==null?void 0:l.general)||0)/1e3,organicWaste:((l==null?void 0:l.organic)||0)/1e3,recyclableWaste:((l==null?void 0:l.recycle)||0)/1e3,hazardousWaste:((l==null?void 0:l.hazardous)||0)/1e3,totalWaste:p/1e3,notes:i.note,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),createdBy:F.trim(),updatedBy:F.trim()};await We(x),q({success:!0,message:"✓ บันทึกไปยัง Google Sheets สำเร็จ"})}catch(x){console.error("Failed to sync to Google Sheets:",x),q({success:!1,message:"⚠ บันทึกใน Local สำเร็จ แต่ไม่สามารถซิงค์ไปยัง Google Sheets ได้"})}finally{se(!1)}D(!1),s?(d<12?V(d+1):(V(1),X(u+1)),h(""),g(""),b(""),f(""),v(""),T("")):(localStorage.removeItem("waste_draft_amount"),h(""),g(""),b(""),f(""),v(""),T(""))},500))},ye=()=>{confirm("ต้องการล้างข้อมูลในแบบฟอร์มทั้งหมดหรือไม่?")&&(h(""),K(r.TON),R(""),g(""),b(""),f(""),v(""),T(""),H(null),E(null),localStorage.removeItem("waste_draft_amount"),localStorage.removeItem("waste_draft_pop"))},Se=t=>{var n;const s=(n=t.target.files)==null?void 0:n[0];if(!s)return;D(!0);const a=new FileReader;a.onload=p=>{var l;try{const x=((l=p.target)==null?void 0:l.result).split(`
`).map(N=>N.trim()).filter(N=>N),I=[];x.forEach((N,ie)=>{if(ie===0&&(N.toLowerCase().includes("month")||N.toLowerCase().includes("เดือน")))return;const C=N.split(",");if(C.length>=4){const de=parseInt(C[0]),ce=parseInt(C[1]),me=parseFloat(C[2]),xe=parseInt(C[3]);!isNaN(de)&&!isNaN(ce)&&!isNaN(me)&&!isNaN(xe)&&I.push({id:Date.now().toString()+ie+Math.random().toString(36),month:de,year:ce,amountKg:me,population:xe,timestamp:Date.now(),recorderName:C[4]||"Imported",recorderPosition:C[5]||"-"})}}),I.length>0&&(fe(I),alert(`✅ นำเข้าข้อมูลสำเร็จจำนวน ${I.length} รายการ`))}catch{alert("❌ เกิดข้อผิดพลาดในการอ่านไฟล์ CSV")}finally{D(!1),te.current&&(te.current.value="")}},a.readAsText(s)},Fe=()=>{const t=parseFloat(c);return isNaN(t)?null:m===r.TON?`= ${(t*1e3).toLocaleString()} kg`:`= ${(t/1e3).toLocaleString()} Ton`},ne=(parseFloat(j)||0)+(parseFloat(w)||0)+(parseFloat(y)||0)+(parseFloat(S)||0),J=parseFloat(c)||0,Ce=Math.abs(ne-J)<.01,_e=()=>{if(_.length===0){alert("ไม่พบข้อมูลสำหรับส่งออก");return}const t=["เดือน","ปี","ปริมาณขยะ (ตัน)","ประชากร (คน)","อัตราการเกิดขยะ (กก./คน/วัน)","หมายเหตุ"],s=_.map(i=>{const x=i.population>0?(i.amountKg/i.population/30).toFixed(3):"0.000",I=(i.amountKg/1e3).toFixed(2),N=i.note?`"${i.note.replace(/"/g,'""')}"`:"-";return[Q[i.month-1],i.year,I,i.population,x,N].join(",")}),a="\uFEFF"+[t.join(","),...s].join(`
`),n=new Blob([a],{type:"text/csv;charset=utf-8;"}),p=URL.createObjectURL(n),l=document.createElement("a");l.href=p,l.download=`waste_records_export_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(l),l.click(),document.body.removeChild(l)};return e.jsxs("div",{className:"max-w-5xl mx-auto pb-20 animate-slide-up",children:[e.jsx("div",{className:"flex justify-center mb-8",children:e.jsxs("div",{className:"glass-panel p-1.5 rounded-2xl shadow-glass inline-flex gap-1 relative z-10",children:[e.jsx("button",{type:"button",onClick:()=>ee("manual"),className:`px-8 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 ${B==="manual"?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30":"text-slate-500 hover:bg-slate-50/50"}`,children:"Manual Entry"}),e.jsxs("button",{type:"button",onClick:()=>ee("import"),className:`px-8 py-2.5 rounded-xl text-sm font-bold transition-all duration-300 flex items-center gap-2 ${B==="import"?"bg-gradient-to-r from-emerald-500 to-teal-500 text-white shadow-lg shadow-emerald-500/30":"text-slate-500 hover:bg-slate-50/50"}`,children:[e.jsx(ue,{size:16})," Import Excel"]})]})}),B==="manual"?e.jsxs("div",{className:"glass-panel rounded-3xl shadow-glass hover:shadow-glass-hover transition-all duration-500 relative overflow-hidden border border-white/60",children:[e.jsx("div",{className:"absolute top-0 right-0 w-96 h-96 bg-gradient-to-bl from-emerald-100/30 to-transparent opacity-50 pointer-events-none rounded-full -mr-24 -mt-24 blur-3xl"}),e.jsxs("div",{className:"p-8 pb-6 flex flex-col md:flex-row justify-between items-start md:items-center gap-6 relative z-10 border-b border-slate-100/50",children:[e.jsxs("div",{className:"flex items-center gap-5",children:[e.jsx("div",{className:`w-14 h-14 rounded-2xl shadow-sm flex items-center justify-center border border-white ${k?"bg-gradient-to-br from-amber-100 to-orange-50 text-amber-600":"bg-gradient-to-br from-emerald-100 to-teal-50 text-emerald-600"}`,children:k?e.jsx(Te,{size:28}):e.jsx(ze,{size:28})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-800 tracking-tight",children:k?"แก้ไขข้อมูล (Edit Record)":"บันทึกใหม่ (New Entry)"}),e.jsx("p",{className:"text-slate-500 text-sm font-medium",children:k?`กำลังแก้ไข: ${Q[d-1]} ${u}`:"เพิ่มสถิติการจัดการขยะประจำเดือน"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:we,className:"px-4 py-2 text-xs font-bold text-indigo-600 bg-indigo-50/50 hover:bg-indigo-50 rounded-xl border border-indigo-100 flex items-center gap-2 transition-all",children:[e.jsx(ke,{size:14})," สุ่มข้อมูล"]}),e.jsxs("button",{type:"button",onClick:oe,className:`px-4 py-2 text-xs font-bold rounded-xl border flex items-center gap-2 transition-all ${z?"bg-green-50 text-green-600 border-green-200":"text-slate-600 bg-white/50 border-slate-200 hover:bg-white"}`,children:[z?e.jsx(pe,{size:14}):e.jsx(Ie,{size:14})," ",z?"บันทึกแล้ว":"แบบร่าง"]})]})]}),e.jsxs("form",{className:"p-8 space-y-12 relative z-10",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:"1"})," ข้อมูลพื้นฐาน"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"group relative",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 ml-1",children:"เดือน"}),e.jsxs("div",{className:"relative",children:[e.jsx("select",{value:d,onChange:t=>V(parseInt(t.target.value)),className:"w-full p-4 pr-10 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all cursor-pointer font-bold appearance-none text-slate-700",children:Q.map((t,s)=>e.jsx("option",{value:s+1,children:t},s))}),e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2 pointer-events-none text-slate-400",children:"▼"})]})]}),e.jsxs("div",{className:"group",children:[e.jsx("label",{className:"block text-xs font-bold text-slate-500 mb-2 ml-1",children:"ปี พ.ศ."}),e.jsx("input",{type:"number",value:u,onChange:t=>X(parseInt(t.target.value)),className:"w-full p-4 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all font-bold text-slate-700"})]}),e.jsxs("div",{className:"group relative",children:[e.jsxs("label",{className:"block text-xs font-bold text-slate-500 mb-2 ml-1 flex justify-between",children:["จำนวนประชากร ",e.jsx(Oe,{size:12,className:"text-slate-400"})]}),e.jsx("input",{type:"number",value:W,onChange:t=>R(t.target.value),placeholder:"e.g. 12,000",required:!0,className:"w-full p-4 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all font-bold text-slate-700 placeholder:font-normal"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-end",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600",children:"2"})," ปริมาณขยะ"]}),e.jsxs("div",{className:"flex bg-slate-100/80 p-1 rounded-xl border border-slate-200",children:[e.jsx("button",{type:"button",onClick:()=>le(r.TON),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${m===r.TON?"bg-white shadow-sm text-emerald-600":"text-slate-500 hover:text-slate-700"}`,children:"ตัน (Ton)"}),e.jsx("button",{type:"button",onClick:()=>le(r.KG),className:`px-4 py-1.5 rounded-lg text-xs font-bold transition-all ${m===r.KG?"bg-white shadow-sm text-emerald-600":"text-slate-500 hover:text-slate-700"}`,children:"กก. (Kg)"})]})]}),e.jsxs("div",{className:"p-8 rounded-3xl border transition-all bg-gradient-to-br from-white to-emerald-50/30 border-emerald-100 shadow-sm relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-emerald-400/10 rounded-full blur-2xl -mr-10 -mt-10 group-hover:bg-emerald-400/20 transition-colors"}),e.jsxs("div",{className:"flex justify-between items-center mb-4 relative z-10",children:[e.jsx("label",{className:"block text-sm font-bold text-emerald-900",children:"น้ำหนักรวม (Total Weight)"}),c&&e.jsx("span",{className:"text-xs font-bold text-slate-500 bg-white/80 px-3 py-1.5 rounded-lg border border-emerald-100/50 backdrop-blur-sm",children:Fe()})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"number",step:"0.01",value:c,onChange:t=>h(t.target.value),placeholder:"0.00",required:!0,className:"w-full p-5 border-2 border-emerald-100 rounded-2xl outline-none text-4xl font-bold text-emerald-600 focus:border-emerald-400 bg-white/80 shadow-inner transition-all placeholder:text-emerald-100"}),e.jsx("div",{className:"absolute right-6 top-1/2 -translate-y-1/2 text-emerald-200 font-bold text-lg pointer-events-none",children:m===r.TON?"TON":"KG"})]}),U&&e.jsxs("div",{className:"mt-4 bg-amber-50 border border-amber-200 rounded-xl p-3 flex items-start gap-3 animate-pulse",children:[e.jsx($e,{className:"text-amber-500 shrink-0 mt-0.5",size:18}),e.jsx("p",{className:"text-xs font-bold text-amber-700 leading-relaxed",children:U})]})]}),e.jsxs("div",{className:"bg-slate-50/50 p-6 rounded-3xl border border-slate-100 relative",children:[e.jsxs("h4",{className:"text-xs font-bold text-slate-500 mb-4 flex items-center gap-2",children:[e.jsx(De,{size:14})," แยกองค์ประกอบขยะ (ไม่บังคับ)"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"ทั่วไป (General)",val:j,set:g,color:"blue"},{label:"อินทรีย์ (Organic)",val:w,set:b,color:"emerald"},{label:"รีไซเคิล (Recycle)",val:y,set:f,color:"amber"},{label:"อันตราย (Hazardous)",val:S,set:v,color:"red"}].map((t,s)=>e.jsxs("div",{className:"group",children:[e.jsx("label",{className:`text-[10px] font-bold text-${t.color}-500 mb-1.5 block uppercase tracking-wide`,children:t.label}),e.jsx("input",{type:"number",value:t.val,onChange:a=>t.set(a.target.value),className:`w-full p-3 rounded-xl text-sm font-bold border border-slate-200 focus:ring-2 focus:ring-${t.color}-200 focus:border-${t.color}-400 outline-none transition-all bg-white`,placeholder:"0"})]},s))}),!Ce&&J>0&&e.jsxs("div",{className:"mt-4 flex items-center justify-between text-xs bg-white p-3 rounded-xl border border-slate-200 shadow-sm",children:[e.jsxs("span",{className:"text-slate-500 font-medium",children:["ยอดรวมย่อย: ",e.jsx("span",{className:"font-bold",children:ne.toFixed(2)})," vs ยอดรวมจริง: ",e.jsx("span",{className:"font-bold",children:J.toFixed(2)})]}),e.jsx("button",{type:"button",onClick:Ne,className:"text-indigo-600 hover:text-indigo-800 font-bold bg-indigo-50 hover:bg-indigo-100 px-3 py-1.5 rounded-lg transition-colors",children:"ปรับยอดรวมอัตโนมัติ"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("h3",{className:"text-xs font-bold text-slate-400 uppercase tracking-widest flex items-center gap-3",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-slate-100 flex items-center justify-center text-slate-500",children:"3"})," ผู้บันทึก & หมายเหตุ"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Ee,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",list:"staff-list",value:F,onChange:je,placeholder:"ชื่อผู้บันทึก",className:"w-full pl-12 p-4 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all font-medium text-slate-700"}),e.jsx("datalist",{id:"staff-list",children:O.map((t,s)=>e.jsx("option",{value:t.name},s))})]}),e.jsxs("div",{className:"relative",children:[e.jsx(Ke,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-slate-400",size:18}),e.jsx("input",{type:"text",value:$,onChange:t=>G(t.target.value),placeholder:"ตำแหน่ง",className:"w-full pl-12 p-4 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all font-medium text-slate-700"})]})]}),e.jsx("div",{children:e.jsxs("div",{className:"relative h-full",children:[e.jsx(Re,{className:"absolute left-4 top-5 text-slate-400",size:18}),e.jsx("textarea",{value:Z,onChange:t=>T(t.target.value),placeholder:"หมายเหตุเพิ่มเติม...",className:"w-full h-full pl-12 p-4 border border-slate-200 rounded-2xl outline-none bg-white/50 hover:bg-white focus:bg-white focus:ring-2 focus:ring-emerald-500/30 focus:border-emerald-500 transition-all font-medium text-slate-700 resize-none min-h-[120px]"})]})})]})]}),e.jsxs("div",{className:"space-y-3 pt-6 border-t border-slate-100",children:[e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"button",onClick:ye,className:"flex-1 py-2.5 px-4 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(he,{size:16})," ล้างฟอร์ม"]}),e.jsxs("button",{type:"button",onClick:_e,className:"flex-1 py-2.5 px-4 bg-slate-100 text-slate-600 rounded-xl font-bold hover:bg-slate-200 transition-colors flex items-center justify-center gap-2 text-sm",children:[e.jsx(Ge,{size:16})," Export CSV"]}),e.jsxs("button",{type:"button",onClick:oe,className:`flex-1 py-2.5 px-4 rounded-xl font-bold transition-all flex items-center justify-center gap-2 text-sm ${z?"bg-green-100 text-green-600":"bg-indigo-50 text-indigo-600 hover:bg-indigo-100"}`,children:[z?e.jsx(pe,{size:16}):e.jsx(ge,{size:16}),z?"บันทึกแล้ว":"บันทึกร่าง"]})]}),ae&&e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 bg-blue-50 border border-blue-200 rounded-xl",children:[e.jsx(Me,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-xs font-medium text-blue-700",children:"Google Sheets Sync เปิดใช้งาน"})]}),Y&&e.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-xl border ${Y.success?"bg-green-50 border-green-200 text-green-700":"bg-yellow-50 border-yellow-200 text-yellow-700"}`,children:[e.jsx(Ae,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs font-medium",children:Y.message})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{type:"submit",disabled:M||P,onClick:t=>re(t,!1),className:"flex-1 py-3.5 px-6 bg-gradient-to-r from-emerald-500 to-teal-600 text-white rounded-xl font-bold shadow-lg shadow-emerald-500/30 hover:shadow-emerald-500/50 hover:-translate-y-0.5 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed",children:[M||P?e.jsx(he,{className:"animate-spin",size:20}):e.jsx(ge,{size:20}),P?"กำลังซิงค์...":k?"บันทึกการแก้ไข":"บันทึกข้อมูล"]}),e.jsxs("button",{type:"button",disabled:M||P,onClick:t=>re(t,!0),className:"flex-1 py-3.5 px-6 bg-white border-2 border-emerald-500 text-emerald-600 rounded-xl font-bold hover:bg-emerald-50 transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:cursor-not-allowed shadow-sm hover:shadow-md",children:[e.jsx(Pe,{size:20}),"บันทึก & เดือนถัดไป"]})]})]})]})]}):e.jsxs("div",{className:"glass-panel rounded-3xl p-12 text-center border border-white/60 border-dashed min-h-[400px] flex flex-col justify-center items-center relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-slate-50/50 skew-y-12 transform scale-150 opacity-50 pointer-events-none"}),e.jsxs("div",{className:"relative z-10",children:[e.jsx("div",{className:"w-24 h-24 bg-white rounded-full shadow-lg flex items-center justify-center mx-auto mb-6",children:e.jsx(ue,{size:40,className:"text-emerald-500"})}),e.jsx("h3",{className:"text-2xl font-bold text-slate-800 mb-2",children:"นำเข้าไฟล์ CSV (Import)"}),e.jsx("p",{className:"text-slate-500 mb-8 max-w-md mx-auto",children:"อัปโหลดไฟล์ CSV ที่มีคอลัมน์: Month, Year, Amount, Population"}),e.jsxs("label",{className:"cursor-pointer group relative inline-block",children:[e.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-emerald-600 to-teal-600 rounded-2xl blur opacity-25 group-hover:opacity-75 transition duration-200"}),e.jsx("div",{className:"relative px-8 py-4 bg-white ring-1 ring-slate-900/5 rounded-2xl leading-none flex items-center space-x-4",children:e.jsx("span",{className:"text-emerald-700 font-bold group-hover:text-emerald-800 transition",children:"เลือกไฟล์ CSV"})}),e.jsx("input",{type:"file",accept:".csv",onChange:Se,className:"hidden"})]}),M&&e.jsx("p",{className:"mt-4 text-emerald-600 font-bold animate-pulse",children:"กำลังประมวลผล..."})]})]})]})};export{qe as default};
